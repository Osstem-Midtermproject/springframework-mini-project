<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.webapp.dao.ProgressDao">

   <resultMap id="selectProgressWithHospitalResultMap" type="progress">
    <result column="rnum" property="pno" />
      <result column="pdate" property="pdate" />
      <result column="pcontent" property="pcontent" />
      <result column="pcategory" property="pcategory" />
      <association property="hospital" javaType="hospital">
         <result column="hname" property="hname" />
         <result column="hpn" property="hpn" />
      </association>
   </resultMap>
   
   <select id="selectByPager" parameterType="pager" resultMap="selectProgressWithHospitalResultMap">
      select rnum, pdate, pcontent,pcategory,hname,hpn
          from (
              select rownum as rnum,pdate,pcontent,pcategory,hname,hpn
              from (
                  SELECT pdate,pcontent,pcategory,hname,hpn
                  FROM hospital, progress
              )
          where rownum &lt;= 5
          )
      where rnum &gt;= 1
   </select>
   
   <select id="count" resultType="int">
      select count(*)
      from progress, hospital
      where hospital.hdln = progress.pdln and hospital.haddress =  progress.paddress
   </select>   
   <select id="selectAll" resultMap="selectProgressWithHospitalResultMap">
      <!-- select *
      from progress, hospital
      where progress.pdln = hospital.hdln and progress.paddress = hospital.haddress -->    
      select * 
      from progress
      
   </select>

</mapper>